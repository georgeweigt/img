FUNCTION FINDMOUSE:INTEGER;
VAR SLOT:INTEGER;
BEGIN
#A
 LDY #6         ;MSB OF FUNCTION VALUE
 LDA #0
 STA _T         ;LSB OF ROM LOCATIONS
 STA (_SP),Y    ;AND MSB OF FUNCTION VALUE
 LDA #$C7
 STA _T+1
FM1 LDY #$0C
 LDA (_T),Y     ;FIRST ID BYTE
 CMP #$20
 BEQ FM2
FM4 DEC _T+1
 LDA _T+1
 CMP #$C0
 BNE FM1
 LDA #0
 BEQ FM5
FM2 LDY #$FB
 LDA (_T),Y
 CMP #$D6
 BNE FM4
 LDA _T+1        ;FOUND MOUSE
 AND #7
FM5 LDY #5
 STA (_SP),Y     ;LSB OF FUNCTION VALUE
#
 FINDMOUSE := SLOT
END;
